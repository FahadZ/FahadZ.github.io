/*! Widget Manager v2.0 (c) nFusion Solutions, LLC

	Includes LABjs
    v2.0.3 (c) Kyle Simpson
    MIT License
*/
(function(n,t){"use strict";function d(){if(!o.client){r.$LAB||(function(n){function h(n){return Object.prototype.toString.call(n)=="[object Function]"}function s(n){return Object.prototype.toString.call(n)=="[object Array]"}function nt(n,t){var i=/^\w+\:\/\//;return/^\/\/\/?/.test(n)?n=location.protocol+n:i.test(n)||n.charAt(0)=="/"||(n=(t||"")+n),i.test(n)?n:(n.charAt(0)=="/"?a:v)+n}function r(n,t){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i]);return t}function tt(n){for(var i=!1,t=0;t<n.scripts.length;t++)n.scripts[t].ready&&n.scripts[t].exec_trigger&&(i=!0,n.scripts[t].exec_trigger(),n.scripts[t].exec_trigger=null);return i}function i(n,t,i,r){n.onload=n.onreadystatechange=function(){n.readyState&&n.readyState!="complete"&&n.readyState!="loaded"||t[i]||(n.onload=n.onreadystatechange=null,r())}}function o(n){n.ready=n.finished=!0;for(var t=0;t<n.finished_listeners.length;t++)n.finished_listeners[t]();n.ready_listeners=[],n.finished_listeners=[]}function d(n,r,f,e,o){setTimeout(function(){var s,h=r.real_src,v;if("item"in t){if(!t[0]){setTimeout(arguments.callee,25);return}t=t[0]}s=document.createElement("script"),r.type&&(s.type=r.type),r.charset&&(s.charset=r.charset),o?u?(f.elem=s,l?(s.preload=!0,s.onpreload=e):s.onreadystatechange=function(){s.readyState=="loaded"&&e()},s.src=h):o&&h.indexOf(a)==0&&n[b]?(v=new XMLHttpRequest,v.onreadystatechange=function(){v.readyState==4&&(v.onreadystatechange=function(){},f.text=v.responseText+"\n//@ sourceURL="+h,e())},v.open("GET",h),v.send()):(s.type="text/cache-script",i(s,f,"ready",function(){t.removeChild(s),e()}),s.src=h,t.insertBefore(s,t.firstChild)):c?(s.async=!1,i(s,f,"finished",e),s.src=h,t.insertBefore(s,t.firstChild)):(i(s,f,"finished",e),s.src=h,t.insertBefore(s,t.firstChild))},0)}function k(){function ut(n,r,u){function s(){f!=null&&(f=null,o(u))}var f;a[r.src].finished||(n[e]||(a[r.src].finished=!0),f=u.elem||document.createElement("script"),r.type&&(f.type=r.type),r.charset&&(f.charset=r.charset),i(f,u,"finished",s),u.elem?u.elem=null:u.text?(f.onload=f.onreadystatechange=null,f.text=u.text):f.src=r.real_src,t.insertBefore(f,t.firstChild),u.text&&s())}function ft(n,t,i,r){var u,f,h=function(){t.ready_cb(t,function(){ut(n,t,u)})},s=function(){t.finished_cb(t,i)};t.src=nt(t.src,n[y]),t.real_src=t.src+(n[p]?(/\?.*$/.test(t.src)?"&_":"?_")+~~(Math.random()*1e9)+"=":""),a[t.src]||(a[t.src]={items:[],finished:!1}),f=a[t.src].items,n[e]||f.length==0?(u=f[f.length]={ready:!1,finished:!1,ready_listeners:[h],finished_listeners:[s]},d(n,t,u,r?function(){u.ready=!0;for(var n=0;n<u.ready_listeners.length;n++)u.ready_listeners[n]();u.ready_listeners=[]}:function(){o(u)},r)):(u=f[0],u.finished?s():u.finished_listeners.push(s))}function v(){function l(n,t){n.ready=!0,n.exec_trigger=t,c()}function a(n,t){n.ready=n.finished=!0,n.exec_trigger=null;for(var i=0;i<t.scripts.length;i++)if(!t.scripts[i].finished)return;t.finished=!0,c()}function c(){while(u<n.length){if(h(n[u])){try{n[u++]()}catch(i){}continue}else if(!n[u].finished){if(tt(n[u]))continue;break}u++}u==n.length&&(o=!1,t=!1)}function v(){t&&t.scripts||n.push(t={scripts:[],finished:!0})}var i,e=r(f,{}),n=[],u=0,o=!1,t;return i={script:function(){for(var n=0;n<arguments.length;n++)(function(n,u){var c,f;for(s(n)||(u=[n]),f=0;f<u.length;f++)if(v(),n=u[f],h(n)&&(n=n()),n){if(s(n)){c=[].slice.call(n),c.unshift(f,1),[].splice.apply(u,c),f--;continue}typeof n=="string"&&(n={src:n}),n=r(n,{ready:!1,ready_cb:l,finished:!1,finished_cb:a}),t.finished=!1,t.scripts.push(n),ft(e,n,t,rt&&o),o=!0,e[w]&&i.wait()}})(arguments[n],arguments[n]);return i},wait:function(){if(arguments.length>0){for(var r=0;r<arguments.length;r++)n.push(arguments[r]);t=n[n.length-1]}else t=!1;return c(),i}},{script:i.script,wait:i.wait,setOptions:function(n){return r(n,e),i}}}var f={},rt=u||g,l=[],a={},c;return f[b]=!0,f[w]=!1,f[e]=!1,f[p]=!1,f[y]="",c={setGlobalDefaults:function(n){return r(n,f),c},setOptions:function(){return v().setOptions.apply(null,arguments)},script:function(){return v().script.apply(null,arguments)},wait:function(){return v().wait.apply(null,arguments)},queueScript:function(){return l[l.length]={type:"script",args:[].slice.call(arguments)},c},queueWait:function(){return l[l.length]={type:"wait",args:[].slice.call(arguments)},c},runQueue:function(){for(var n=c,i=l.length,r=i,t;--r>=0;)t=l.shift(),n=n[t.type].apply(null,t.args);return n},noConflict:function(){return n.$LAB=it,c},sandbox:function(){return k()}}}var it=n.$LAB,b="UseLocalXHR",w="AlwaysPreserveOrder",e="AllowDuplicates",p="CacheBust",y="BasePath",v=/^[^?#]*\//.exec(location.href)[0],a=/^\w+\:\/\/\/?[^\/]+/.exec(v)[0],t=document.head||document.getElementsByTagName("head"),rt=n.opera&&Object.prototype.toString.call(n.opera)=="[object Opera]"||"MozAppearance"in document.documentElement.style,f=document.createElement("script"),l=typeof f.preload=="boolean",u=l||f.readyState&&f.readyState=="uninitialized",c=!u&&f.async===!0,g=!u&&!c&&!rt;n.$LAB=k(),function(n,t,i){document.readyState==null&&document[n]&&(document.readyState="loading",document[n](t,i=function(){document.removeEventListener(t,i,!1),document.readyState="complete"},!1))}("addEventListener","DOMContentLoaded")}(n),r.$LAB=n.$LAB.noConflict().wait());var u="https:"==document.location.protocol?"https:":"http:",t=u+"//static-cdn-422998.c.cdn77.org/lib/nfusion/widget/4/",f=t+"easyxdm.swf",e=t+"json2.min.js",s=t+"easyXDM.min.js";r.$LAB.script(n.JSON?null:e).script(s).wait(function(){r.easyXDM=r.easyXDM||n.easyXDM.noConflict("nfusion.lib")}),it.throttle=l,o.client={settings:{resize:!0},add:b,remove:ut,broadcast:v,subscribe:ft,unsubscribe:p,update:w,resize:h},r.$LAB.wait(function(){i.socket=nt(f)})}}function b(n,t,r){var f,o;(!t||u(t))&&(!r||u(r))&&(t||(t=e,r=e),f=i.channels[t],f||(f=i.channels[t]=c()),r||(r=e),o=f.handlers[r]=f.handlers[r]||[],o.push(n))}function ut(n,t,r){var o,f,s;(!t||u(t))&&(!r||u(r))&&(t||(t=e,r=e),o=i.channels[t],o)&&(r||(r=e),f=o.handlers[r],f)&&(s=y(f,n),s!=-1&&f.splice(s,1))}function v(n,t,r){if(u(n)&&u(t)){var f=i.channels[n];f&&s(function(){i.socket.broadcast(n,t,r)})}}function ft(n){if(u(n)&&n!=a){var t=i.channels[n];return t||(t=i.channels[n]=c()),s(function(){i.socket.subscribe(n)}),t}}function p(n,t){u(n)&&n!=a&&(t&&delete i.channels[n],s(function(){i.socket.unsubscribe(n)}))}function w(n){s(function(){i.socket.update(n)})}function s(n){i.ready?n():i.readyQueue.push(n)}function k(n){var u=i.channels[n.channel],r,t;if(u)for(r=g(u,n.type),t=0;t<r.length;t++)r[t](n)}function c(){return{handlers:{}}}function g(n,t){var r="_all",u=n.handlers[t]||[],f=n.handlers[r]||[],e=i.channels[r]||c(),o=e.handlers[r]||[];return u.concat(f,o)}function nt(n){return new r.easyXDM.Rpc({swf:n,onReady:tt},{local:{send:{method:k}},remote:{broadcast:{},update:{},resize:{},subscribe:{},unsubscribe:{}}})}function tt(){i.ready=!0;for(var n=0;n<i.readyQueue.length;n++)i.readyQueue[n]();i.readyQueue=null,o.client.settings.resize&&h();r.easyXDM.DomHelper.on(window,"resize",l(function(){o.client.settings.resize&&h()},250))}function h(n){var r,u,f;(n===t?n={}:typeof n=="boolean"&&(n={forceResize:!0}),r=rt(n.height,document.body.offsetHeight),u=n.width,n.forceResize||u!==t||i.height!==r)&&(i.height=r,f={height:r,width:u},n.forceResize&&u===t&&(f.width=document.body.offsetWidth),s(function(){i.socket.resize(f)}))}function u(n){return/^[A-Z][A-Z0-9\-_]*$/i.test(n)}function rt(n,i){return n!==t?n:i}function y(n,t){var r,i;if(Array.prototype.indexOf)return n.indexOf(t);for(r=-1,i=0;i<n.length;i++)if(n[i]===t){r=i;break}return r=-1}function l(n,t){var u,f,e,i=null,r=0,o=function(){r=new Date,i=null,e=n.apply(u,f)};return function(){var s=new Date,h;return r||(r=s),h=t-(s-r),u=this,f=arguments,h<=0?(clearTimeout(i),i=null,r=s,e=n.apply(u,f)):i||(i=setTimeout(o,h)),e}}var f=n.nfusion=n.nfusion||{},o=f.widget=f.widget||{},r=f.lib=f.lib||{},it=f.util=f.util||{},e="_all",a="external_source",i={channels:{_host:{handlers:{orientationchange:[l(function(){o.client.settings.resize&&h({forceResize:!0})},250)]}},external_source:c()},height:null,ready:!1,readyQueue:[],socket:null};d()})(window);